{
    "collab_server" : "",
    "contents" : "library(arules)\nlibrary(arulesViz)\n##library(rmarkdown)\nlibrary(Matrix)\nlibrary(readr)\n##library(knitr)\nlibrary(dr)\nlibrary(FSelector)\n\n\nraw = read_csv(\"~/Test/Accidents_2015.csv\" )\n\n\n##raw$Accident_Index <- factor(raw$Accident_Index)\nraw$Accident_Index <- NULL\n##raw$Location_Easting_OSGR <- as.factor(as.numeric(raw$Location_Easting_OSGR))\n##raw$Location_Northing_OSGR <- as.factor(as.numeric(raw$Location_Northing_OSGR))\nraw$Location_Easting_OSGR <- NULL\nraw$Location_Northing_OSGR <- NULL\nraw$Longitude <- discretize(raw$Longitude ,categories = 50, onlycuts=FALSE)\nraw$Latitude <- discretize(raw$Latitude ,categories = 50, onlycuts=FALSE)\n\nraw$Police_Force <- discretize(raw$Police_Force ,categories=3  )\nraw$Police_Force <- as.factor(as.numeric(raw$Police_Force))\n\n\nraw$Accident_Severity <- factor(raw$Accident_Severity,labels=c(\"Fatal\",\"Serious\",\"Slight\"))\n\n##raw$Date <- as.Date(sprintf(\"%s\", raw$Date), format =\"%Y%m%d\")\nraw$Date <- NULL\nraw$Time <- NULL\nraw$Number_of_Vehicles[raw$Number_of_Vehicles<0 | raw$Number_of_Vehicles > 6 ] <- NA\nraw$Number_of_Vehicles <- as.factor(raw$Number_of_Vehicles)\n\nraw$Number_of_Casualties [raw$Number_of_Casualties<0 | raw$Number_of_Casualties>38]\nraw$Number_of_Casualties <- as.factor(raw$Number_of_Casualties)\n\n##raw$Day_of_Week[raw$Day_of_Week <1 | raw$Day_of_Week>7] <- NA\n##raw$Day_of_Week <- as.factor(raw$Day_of_Week)\nraw$Day_of_Week <- NULL\n\nraw$'Local_Authority_(District)' <- NULL\nraw$'Local_Authority_(Highway)'<- NULL\nraw$'1st_Road_Class' <- NULL\nraw$'1st_Road_Number' <- NULL\nraw$`2nd_Road_Class` <- NULL\nraw$`2nd_Road_Number` <- NULL\nraw$`Pedestrian_Crossing-Human_Control` <- NULL\nraw$`Pedestrian_Crossing-Physical_Facilities` <- NULL\n\n\nraw$Junction_Detail <- NULL\nraw$Junction_Control <- NULL\n\nraw$Road_Type <- as.factor(raw$Road_Type)\nraw$Speed_limit <- as.factor(raw$Speed_limit)\n\n\n\n##raw$Urban_or_Rural_Area[raw$Urban_or_Rural_Area < 0 | raw$Urban_or_Rural_Area > 2] <- NA\n##raw$Urban_or_Rural_Area <- factor(raw$Urban_or_Rural_Area,labels=c(\"Urban\",\"Rural\"))\nraw$Urban_or_Rural_Area <- NULL\n\nraw$Weather_Conditions[raw$Weather_Conditions < 1 | raw$Weather_Conditions > 7] <- NA\nraw$Weather_Conditions <- factor(raw$Weather_Conditions,labels=c(\"Fine no high winds\",\"Raining no high winds\",\"Snowing no high winds\",\"Fine + high winds\",\"Raining + high winds\",\"Snowing + high winds\",\"Fog or mist\"))\n\nraw$Light_Conditions <- as.factor(raw$Light_Conditions)\nraw$Road_Surface_Conditions <- as.factor(raw$Road_Surface_Conditions)\n\n##raw$Special_Conditions_at_Site <- as.factor(raw$Special_Conditions_at_Site)\nraw$Special_Conditions_at_Site <- NULL\nraw$Carriageway_Hazards <- NULL\nraw$Did_Police_Officer_Attend_Scene_of_Accident <- NULL\n\n\n##raw$LSOA_of_Accident_Location <- as.factor(raw$LSOA_of_Accident_Location)\nraw$LSOA_of_Accident_Location <- NULL\n\nraw <- raw[complete.cases(raw),]\n\n##trans = read.transactions(\"~/Test/Accidents_2015.csv\", format = \"basket\", sep = \",\", cols =1,rm.duplicates = TRUE, skip = 1)\n\ntrans = as(raw, \"transactions\")\n\nrules <- apriori(trans)\nrules.sorted <- sort(rules, by=\"lift\")\ninspect(rules.sorted)\nplot(rules)\nfrequentItems <- apriori(trans, parameter= list(support=0.4, target= \"frequent itemsets\"))\n\n\n\n\n\n##d <- dissimilarity(sample(frequentItems, 400), y=NULL ,method =NULL)\n## d[is.na(d)] <- 1 # get rid of missing values\n\n##\n\n \n##save.image('.//.RData')\n##render(\"report.Rmd\")\n\n",
    "created" : 1489253161006.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2123623131",
    "id" : "442C1A52",
    "lastKnownWriteTime" : 1489252454,
    "last_content_update" : 1489252454,
    "path" : "~/Test/pa1.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}